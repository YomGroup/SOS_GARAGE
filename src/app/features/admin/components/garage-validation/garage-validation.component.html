<div class="min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 p-4 md:p-6">
  <!-- Header -->
  <div class="mb-6">
    <div class="flex items-center gap-4 flex-wrap">
      <mat-icon class="text-indigo-600 text-4xl">garage</mat-icon>
      <div class="min-w-0">
        <h1 class="text-2xl md:text-3xl font-bold text-gray-800">üèóÔ∏è Validation des Garages</h1>
        <p class="text-gray-500 text-sm md:text-base">G√©rez et validez les demandes d'inscription des garages</p>
      </div>
    </div>
  </div>

  <!-- Card -->
  <div class="w-full bg-white/80 backdrop-blur-lg rounded-xl shadow-2xl border border-white/30 overflow-hidden">
    <!-- Toolbar -->
    <div class="p-4 md:p-6 border-b border-gray-200 bg-gradient-to-r from-white to-gray-50 flex flex-col md:flex-row justify-between items-center gap-4">
      <div class="flex items-center gap-3">
        <mat-icon class="bg-indigo-50 text-indigo-600 p-2 rounded-lg text-2xl flex items-center justify-center">build</mat-icon>
        <div>
          <h2 class="text-lg md:text-xl font-semibold text-gray-800">Liste des Garages</h2>
          <span class="text-gray-500 text-sm">{{ dataSource.data.length }} garages au total</span>
        </div>
      </div>

      <div class="w-full md:w-auto flex-1 md:flex-none">
        <mat-form-field class="w-full md:w-80" appearance="outline">
          <mat-label>Rechercher un garage...</mat-label>
          <input matInput (keyup)="applyFilter($event)" placeholder="Rechercher...">
          <mat-icon matPrefix>search</mat-icon>
        </mat-form-field>
      </div>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
      <table mat-table [dataSource]="dataSource" matSort class="w-full bg-transparent">
        <!-- Nom -->
        <ng-container matColumnDef="nom">
          <th mat-header-cell *matHeaderCellDef class="px-4 md:px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Nom</th>
          <td mat-cell *matCellDef="let row" class="px-4 md:px-6 py-3 border-b border-gray-100">
            <div class="flex items-center gap-3 min-w-0">
              <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center text-white font-semibold text-sm">
                {{ row.nom.charAt(0) }}
              </div>
              <div class="truncate min-w-0">
                <div class="font-semibold text-gray-800 text-sm truncate">{{ row.nom }}</div>
                <div class="text-gray-500 text-xs truncate">{{ row.email }}</div>
              </div>
            </div>
          </td>
        </ng-container>

        <!-- Adresse -->
        <ng-container matColumnDef="adresse">
          <th mat-header-cell *matHeaderCellDef class="px-4 md:px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Adresse</th>
          <td mat-cell *matCellDef="let row" class="px-4 md:px-6 py-3 border-b border-gray-100 text-sm text-gray-600">
            <div class="flex items-center gap-2">
              <mat-icon class="text-base">location_on</mat-icon>
              <span class="truncate max-w-[200px]">{{ row.adresse }}</span>
            </div>
          </td>
        </ng-container>

        <!-- T√©l√©phone -->
        <ng-container matColumnDef="telephone">
          <th mat-header-cell *matHeaderCellDef class="px-4 md:px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">T√©l√©phone</th>
          <td mat-cell *matCellDef="let row" class="px-4 md:px-6 py-3 border-b border-gray-100 text-sm text-gray-600">
            <div class="flex items-center gap-2">
              <mat-icon class="text-base">phone</mat-icon>
              <span>{{ row.telephone }}</span>
            </div>
          </td>
        </ng-container>

        <!-- Documents -->
        <ng-container matColumnDef="documents">
          <th mat-header-cell *matHeaderCellDef class="px-4 md:px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Documents</th>
          <td mat-cell *matCellDef="let row" class="px-4 md:px-6 py-3 border-b border-gray-100">
            <div class="flex items-center gap-4">
              <ng-container *ngFor="let doc of ['siret', 'assurance', 'certification']">
                <div class="flex flex-col items-center gap-1">
                  <mat-icon 
                    [ngClass]="{
                      'text-green-500': row.documents[doc], 
                      'text-red-500': !row.documents[doc]
                    }"
                    class="text-base w-6 h-6 p-1 rounded-full"
                    [matTooltip]="doc.charAt(0).toUpperCase() + doc.slice(1)">
                    {{ row.documents[doc] ? 'check_circle' : 'cancel' }}
                  </mat-icon>
                  <span class="text-[10px] text-gray-500">{{ doc.charAt(0).toUpperCase() + doc.slice(1) }}</span>
                </div>
              </ng-container>
            </div>
          </td>
        </ng-container>

        <!-- Commission -->
        <ng-container matColumnDef="commission">
          <th mat-header-cell *matHeaderCellDef class="px-4 md:px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Commission</th>
          <td mat-cell *matCellDef="let row" class="px-4 md:px-6 py-3 border-b border-gray-100">
            <div class="flex items-center gap-3">
              <mat-chip class="bg-indigo-50 text-indigo-700 font-medium text-sm">
                <mat-icon matChipAvatar class="text-base">percent</mat-icon>
                {{ row.commission }}%
              </mat-chip>
              <button mat-icon-button class="hover:bg-blue-50 hover:text-blue-600" matTooltip="Modifier la commission" (click)="modifierCommission(row, row.commission)">
                <mat-icon>edit</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <!-- Actions -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="px-4 md:px-6 py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Actions</th>
          <td mat-cell *matCellDef="let row" class="px-4 md:px-6 py-3 border-b border-gray-100">
            <div class="flex items-center justify-center gap-2">
              <button mat-icon-button class="hover:bg-green-50 hover:text-green-600" matTooltip="Valider" (click)="validerGarage(row)" [disabled]="row.statut !== 'EN_ATTENTE'">
                <mat-icon>check</mat-icon>
              </button>
              <button mat-icon-button class="hover:bg-red-50 hover:text-red-600" matTooltip="Rejeter" (click)="rejeterGarage(row)" [disabled]="row.statut !== 'EN_ATTENTE'">
                <mat-icon>close</mat-icon>
              </button>
              <button mat-icon-button class="hover:bg-blue-50 hover:text-blue-600" matTooltip="Voir les d√©tails">
                <mat-icon>visibility</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-indigo-50/10 transition-all"></tr>
      </table>
    </div>

    <!-- Pagination -->
    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons class="p-4 border-t border-gray-100 bg-gradient-to-r from-white to-gray-50"></mat-paginator>
  </div>
</div>
