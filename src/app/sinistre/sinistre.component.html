<div class="container-fluid py-4 bg-light min-vh-100">
  <!-- Statistiques -->
  <div class="row g-4 mb-4">
    <div class="col-md-6 col-lg-3">
      <div class="card shadow-sm h-100 border-0">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="bg-primary bg-gradient rounded-circle p-3 text-white me-3">
              <i class="bi bi-file-earmark-text fs-4"></i>
            </div>
            <div>
              <h5 class="mb-0">{{ sinistres.length }}</h5>
              <p class="text-muted mb-0 small">Total Sinistres</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
      <div class="card shadow-sm h-100 border-0">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="bg-warning bg-gradient rounded-circle p-3 text-white me-3">
              <i class="bi bi-clock fs-4"></i>
            </div>
            <div>
              <h5 class="mb-0">{{ getSinistresEnCours() }}</h5>
              <p class="text-muted mb-0 small">En cours</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
      <div class="card shadow-sm h-100 border-0">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="bg-success bg-gradient rounded-circle p-3 text-white me-3">
              <i class="bi bi-check-circle fs-4"></i>
            </div>
            <div>
              <h5 class="mb-0">{{ getSinistresClotures() }}</h5>
              <p class="text-muted mb-0 small">Clôturés</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
      <div class="card shadow-sm h-100 border-0">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="bg-info bg-gradient rounded-circle p-3 text-white me-3">
              <i class="bi bi-car-front fs-4"></i>
            </div>
            <div>
              <h5 class="mb-0">{{ getTotalVehicules() }}</h5>
              <p class="text-muted mb-0 small">Véhicules déclarés</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Liste des sinistres -->
  <div class="row g-4">
    <div class="col-12">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-white border-0 py-3">
          <h5 class="mb-0">
            <i class="bi bi-clock-history me-2"></i>Historique des Sinistres
          </h5>
        </div>
        <div class="card-body p-0">
          <div class="list-group list-group-flush">
            <div class="list-group-item list-group-item-action p-3 border-0" 
                 *ngFor="let sinistre of sinistres" 
                 (click)="selectSinistre(sinistre)"
                 [class.active]="selectedSinistre?.id === sinistre.id">
              
              <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                  <div class="bg-primary bg-gradient rounded-circle p-2 text-white me-3">
                    <i class="bi bi-car-front fs-5"></i>
                  </div>
                  <div>
                    <h6 class="mb-1">{{ sinistre.vehicule }}</h6>
                    <div class="d-flex align-items-center">
                      <span class="badge rounded-pill me-2" [ngClass]="{
                        'bg-warning text-dark': sinistre.statut === 'En cours',
                        'bg-success': sinistre.statut === 'Clôturé',
                        'bg-secondary': sinistre.statut === 'En attente'
                      }">
                        <i [class]="{
                          'bi bi-clock': sinistre.statut === 'En cours',
                          'bi bi-check-circle': sinistre.statut === 'Clôturé',
                          'bi bi-hourglass': sinistre.statut === 'En attente'
                        }" class="me-1"></i>
                        {{ sinistre.statut }}
                      </span>
                      <small class="text-muted">{{ sinistre.date }}</small>
                    </div>
                  </div>
                </div>
                
                <div class="d-flex align-items-center">
                  <span class="badge bg-light text-dark me-2">{{ sinistre.id }}</span>
                  <div class="rounded-circle p-2 text-white" 
                       [ngClass]="{
                         'bg-success': sinistre.typeVehicule === 'roulant',
                         'bg-danger': sinistre.typeVehicule === 'non roulant'
                       }">
                    <i [class]="sinistre.typeVehicule === 'roulant' ? 'bi bi-car-front' : 'bi bi-p-circle'"></i>
                  </div>
                  <i class="bi bi-chevron-down ms-2" 
                     [class.bi-chevron-up]="selectedSinistre?.id === sinistre.id"></i>
                </div>
              </div>

              <!-- Détails expandus -->
              <div class="mt-3 pt-3 border-top" *ngIf="selectedSinistre?.id === sinistre.id">
                <div class="row">
                  <!-- Notifications -->
                  <div class="col-md-6 mb-3 mb-md-0">
                    <h6 class="text-primary mb-3">
                      <i class="bi bi-bell me-2"></i>Notifications récentes
                    </h6>
                    <div class="list-group list-group-flush">
                      <div class="list-group-item border-0 px-0 py-2" *ngFor="let notif of sinistre.notifications">
                        <div class="d-flex">
                          <div class="bg-primary rounded-circle me-2" style="width: 8px; height: 8px; margin-top: 6px;"></div>
                          <div>
                            <p class="mb-1">{{ notif.message }}</p>
                            <small class="text-muted">{{ notif.temps }}</small>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Documents et Photos -->
                  <div class="col-md-6">
                    <h6 class="text-primary mb-3">
                      <i class="bi bi-folder me-2"></i>Documents et Photos
                    </h6>
                    
                    <div class="mb-3">
                      <small class="text-muted d-block mb-2">Documents signés :</small>
                      <div class="d-flex flex-wrap gap-2">
                        <span class="badge border text-dark" 
                              *ngFor="let doc of sinistre.documents"
                              (click)="viewDocument(doc)"
                              style="cursor: pointer;">
                          <i class="bi bi-file-earmark-pdf me-1"></i>{{ doc }}
                        </span>
                      </div>
                    </div>
                    
                    <div class="mb-3">
                      <small class="text-muted d-block mb-2">Photos du sinistre :</small>
                      <div class="d-flex flex-wrap gap-2">
                        <span class="badge border text-dark" 
                              *ngFor="let photo of sinistre.photos"
                              (click)="viewPhoto(photo)"
                              style="cursor: pointer;">
                          <i class="bi bi-image me-1"></i>{{ photo }}
                        </span>
                      </div>
                    </div>
                    
                    <div>
                      <small class="text-muted d-block mb-2">Constat :</small>
                      <span class="badge bg-info text-white">
                        <i class="bi bi-file-earmark-text me-1"></i>{{ sinistre.constat }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="list-group-item text-center py-5" *ngIf="sinistres.length === 0">
              <i class="bi bi-inbox text-muted display-5 mb-3"></i>
              <p class="text-muted">Aucun sinistre déclaré</p>
              <button class="btn btn-primary mt-2">
                <i class="bi bi-plus me-2"></i>Déclarer un sinistre
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Panel latéral -->
    <div class="col-lg-4 d-none">
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-white border-0 py-3">
          <h6 class="mb-0">
            <i class="bi bi-lightning me-2"></i>Actions rapides
          </h6>
        </div>
        <div class="card-body">
          <button class="btn btn-outline-primary w-100 mb-2">
            <i class="bi bi-plus me-2"></i>Nouveau sinistre
          </button>
          <button class="btn btn-outline-secondary w-100 mb-2">
            <i class="bi bi-download me-2"></i>Exporter l'historique
          </button>
          <button class="btn btn-outline-info w-100">
            <i class="bi bi-printer me-2"></i>Imprimer les documents
          </button>
        </div>
      </div>
    </div>
  </div>
</div>